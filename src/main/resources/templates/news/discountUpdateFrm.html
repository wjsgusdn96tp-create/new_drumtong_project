<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<th:block th:include="common/header"></th:block>
	<h1>할인수정하기</h1>
		<div class="content-wrap">
			<div>
				<form action="/news/discountWrite" method="get">
					<!-- <input type="hidden" name="memberNo" th:value="${session.member.memberNo}">  -->	
		
					<input type="hidden" name="newsNo" th:value="${newsNo}">
					<table border=1>
						<tr>
							<th style="width: 20%">글 제목</th>
							<td th:text="${title}" style="width: 80%" colspan="3">
							</td>
						</tr>
						<tr> 
							<th>할인 적용상품</th>
							<td colspan="3">
								<th:block th:each="p:${product}">
									<th:block th:each="dc:${discount}">
								<input type="checkbox" name="productNo" th:id="${p.productNo}" th:value="${p.productNo}" th:checked="${dc.productNo}==${p.productNo}">
								<label th:for="${p.productNo}" th:text="${p.productName}"></label>
									</th:block>
								</th:block>
							</td>
						</tr>
						
						<tr>
							<th>할인
							</th>
							<td colspan="3">
								<select name="discountSelect" id="discountSelect">
									<option value="Percent"  th:selected="${discountType}=='Percent'">할인율</option>
									<option value="Price"  th:selected="${discountType}=='Price'">할인가격</option>
								</select>
								<input type="number" name="discountPrice" th:value="${discount[0].discountPrice}"><span class="priceInput" >%</span>
							</td>
						</tr>
						<tr>
							<td colspan="4">
							<button class="btn" id="insert-btn" type="submit">수정하기</button>
							</td>
						</tr> 
					</table>
				</form>
			</div>
		</div>
	<th:block th:include="common/footer"></th:block>
	<script th:inline="javascript">
	const discountPrice = [[${discount[0].discountPrice}]];
	console.log(discountPrice);
	
	
	const discountSelect = $("#discountSelect option:selected").val();
	
	if(discountSelect == "Percent"){
		$(".priceInput").text("%");
	} else if(discountSelect == "Price") {
		$(".priceInput").text("원");			
	}
	
	$("#discountSelect").on("change", function(){
		
		const discountSelect = $("#discountSelect option:selected").val();
				
		if(discountSelect == "Percent"){
			$(".priceInput").text("%");
		} else if(discountSelect == "Price") {
			$(".priceInput").text("원");			
		}
	});
	</script>
</body>
</html>