<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>옵션선택</title>
    <link rel="stylesheet" href="/DrumtongCss/orderoption.css">
    <link rel="stylesheet" href="/DrumtongCss/default.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
</head>
<body>
    <th:block th:include="/common/header"></th:block>
    
    <div class="order-option-header">옵션선택</div>

	<div class="order-option-main-box">
	    <div class="order-option-image-box"><img src="/" ></div>
	
	    <div class="order-option-option-box">
	    
	        <div class="order-option-top">
	            <div class="order-option-name" th:text=${p.productName}></div>
	        </div>
	
	            <div class="order-option-quantity-box">
	                <div class="order-option-quantity">
	                    <button class="button-minus1"><span class="material-icons">remove_circle_outline</span></button>
	                    <span class="order-option-count">1</span>
	                    <button class="button-plus1"><span class="material-icons">add_circle_outline</span></button>
	                </div>
	                <div class="order-option-price" th:text=${p.productPrice}></div>
	                	                <div>원</div>
	            </div>
	            
	    <div class="order-option-section">
	        <div class="order-option-label">컵 선택</div>
	            <div class="order-option-cupchoice">
	                <button class="order-option-cupbtn">개인</button>
	                <button class="order-option-cupbtn">매장</button>
	            </div>
	    </div>
	 
	    <div class="order-option-section">
	        <div class="order-option-label">사이즈 선택 (기본 L, XL + 2000원)</div>
	            <div class="order-option-sizechoice">
	                <button class="order-option-sizebtn">L</button>
	                <button class="order-option-sizebtn">XL</button>
	            </div>
	    </div>
	
	    <div class="order-option-section">
	        <div class="order-option-label">샷 추가 (+400원, 최대3회)</div>
	            <div class="order-option-choice">
	                <button class="button-minus2"><span class="material-icons">remove_circle_outline</span></button>
	                    <span class="order-option-shotcount">0</span>
	                <button class="button-plus2"><span class="material-icons">add_circle_outline</span></button>
	            </div>
	    </div>
	    
	    <div class="order-option-section">
	        <div class="order-option-label">휘핑크림 추가(+500원, 최대2회)</div>
	            <div class="order-option-choice">
	                <button class="button-minus3"><span class="material-icons">remove_circle_outline</span></button>
	                    <span class="order-option-creamcount" >0</span>
	                <button class="button-plus3"><span class="material-icons">add_circle_outline</span></button>
	           	</div>
	    </div>
	
	        <div class="order-option-totalbox">
	            <div class="order-option-totalname">결제금액</div>
	            <div class="order-option-totalprice" th:text=${p.productPrice}></div>
	                <div>원</div>
	        </div>
	    </div>
	</div>



	<div class="order-option-footer">
	    <a href="/product/productList" class="order-listpage">메뉴목록</a>
	    <button class="order-reset">옵션초기화</button>
	    
	    <button class="order-cartadd">장바구니담기</button>
	</div>
<script th:inline="javascript">
		
		
		const btn = $(".order-option-cupbtn");
	    
		$(".order-option-cupbtn").on("click",function(){
			
			const solo = $(this);
			
			if(solo == "개인"){
				
				btn.css("border","5px solid red");
			}

			});
			
			const optionPrice = $(".order-option-price").text();
			const totalPayPrice = $(".order-option-totalprice").text();
			const shotPay =  400;
			const creamPay = 500;
			
			
		//지정한 클래스명을 눌렀을때 동작
			
		
		$(".button-plus1").on("click",function(){
			//지정한 클래스명의 태그 안의 문자열값을 대입
			const optionCount = $(".order-option-count").text();
			
            const newtotalPay = $(".order-option-totalprice").text();
			//태그 안의 텍스트 값을 숫자로 변형
			const plusCount = Number(optionCount)+1;
			const totalPrice = optionPrice * plusCount;
			const payPrice = newtotalPay * plusCount;
			
			//태그 안의 문자열값에 플러스한 값을 대입
			$(".order-option-count").text(plusCount);
			$(".order-option-price").text(totalPrice);
			$(".order-option-totalprice").text(payPrice);
			
		});
		
		$(".button-minus1").on("click",function(){
			const optionCount = $(".order-option-count").text();
			
			if(optionCount == 1){
				return;
			}
			const minusCount = Number(optionCount)-1;
			const totalPrice = optionPrice * minusCount;
			const payPrice = totalPayPrice * minusCount;
			
			
			
			$(".order-option-count").text(minusCount);
			$(".order-option-price").text(totalPrice);
			$(".order-option-totalprice").text(payPrice);
		});
		

		$(".button-plus2").on("click",function(){
			const shotCount = $(".order-option-shotcount").text();
			if(shotCount == 3){
				return;
			}
			
			const plusCount = Number(shotCount)+1;
			const shotTotal = plusCount * shotPay;
			
			$(".order-option-shotcount").text(plusCount);
			
			const total =  Number(totalPayPrice)+Number(shotTotal);
			
			
			$(".order-option-totalprice").text(total);
			
		});
		
		$(".button-minus2").on("click",function(){
			const shotCount = $(".order-option-shotcount").text();
			if(shotCount == 0){
				return;
			}
			
			const minusCount = Number(shotCount)-1;
			const shotTotal = minusCount * shotPay;
			
			$(".order-option-shotcount").text(minusCount);
			
			const total =  Number(totalPayPrice)+Number(shotTotal);
			
			$(".order-option-totalprice").text(total);
		});
		
		
		$(".button-plus3").on("click",function(){
			const creamCount = $(".order-option-creamcount").text();
			
			if(creamCount == 3){
				return;
			}
			
			const plusCount = Number(creamCount)+1;
			const creamTotal = plusCount * creamPay;
			
			$(".order-option-creamcount").text(plusCount);
			$(".order-option-totalprice").text(creamTotal);
			
		});
		
		$(".button-minus3").on("click",function(){
			const creamCount = $(".order-option-creamcount").text();
			
			if(creamCount == 0){
				return;
			}
			const minusCount = Number(creamCount)-1;
			const creamTotal = minusCount * creamPay;
			
			$(".order-option-creamcount").text(minusCount);
			$(".order-option-totalprice").text(creamTotal);
		});
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
</script>
</body>
</html>